# 🚀 PromAI 史诗级更新：多环境切换、智能筛选，重新定义运维巡检！

大家好，我是 KubeHan。

今天，我要向大家隆重介绍 **PromAI** 的一次里程碑式更新！

在过去的版本中，我们收到了很多社区用户的反馈：“报表太长看不完”、“多套环境部署麻烦”、“图表颜色有点单调”……
**你们的声音，我们都听到了！**

这次更新，带来了一系列直击痛点的硬核功能。这不仅仅是一次修修补补，而是从交互体验到底层逻辑的全面进化。

---

## 😫 运维人的日常痛点，你中招了吗？

在介绍新功能之前，我们先聊聊运维兄弟们每天都在经历的“至暗时刻”：

*   **痛点 1：巡检像“开盲盒”**
    每天早上到公司第一件事是巡检。面对几十个集群、上千个节点，手动敲命令？太慢！看 Grafana？眼花缭乱！
    > **后果**：往往是用户报障了，才发现某个磁盘满了，或者某个 Pod 昨晚就挂了。

*   **痛点 2：报表“又臭又长”**
    好不容易搞了个自动巡检脚本，生成的 HTML 报告动辄几千行。老板要看日报、周报，你直接甩过去一个 10MB 的 HTML 文件？
    > **后果**：老板根本不看，关键风险被淹没在海量数据中。

*   **痛点 3：多环境“割裂”**
    开发环境、测试环境、生产环境……每个环境都要部署一套监控工具，维护成本直线上升。
    > **后果**：配置不同步，漏监控，甚至因为切错环境导致生产事故。

**PromAI 的出现，就是为了终结这些痛点！**

---

## 💡 解决方案：PromAI 如何拯救你的发际线？

### 场景一：晨间巡检 —— 3分钟搞定全网健康体检

**以前**：你需要登录 VPN，打开 Grafana，逐个 Dashboard 查看 CPU、内存、磁盘水位，耗时 30 分钟起。

**现在**：
1.  打开 PromAI 首页。
2.  点击 **“开始巡检”**。
3.  选择 **“生产环境”** 数据源。
4.  **30秒后**，一份包含所有核心指标的体检报告生成。
5.  点击 **“只看严重”** 按钮，瞬间过滤掉 99% 的正常指标，只展示那 2 个异常节点。
6.  处理异常，喝咖啡。☕️

### 场景二：自动化日报/周报 —— 老板爱看的才是好报表

**以前**：手动截图 Grafana，粘贴到 Word 里，写上“系统运行平稳”，枯燥且费时。

**现在**：
PromAI 支持 **定时任务 + 企业微信/邮件推送**。
*   **日报**：每天早上 9:00，自动发送一份包含昨日核心指标概览的报告到运维群。
*   **老板视角**：报告支持 **“折叠/展开”**，老板只看 Summary（概览）和红色的 Critical（严重）项，细节自动折叠，清爽专业。

### 场景三：多环境统一纳管 —— 一个入口，掌控所有

**以前**：Dev 环境报警发到了 Prod 群，或者 Prod 环境出问题了没人知道。

**现在**：
利用 PromAI 的 **多数据源 + 动态通知** 功能：
*   **Dev 环境巡检** -> 自动路由到“开发群” -> 开发自行处理。
*   **Prod 环境巡检** -> 自动路由到“运维群” + 邮件抄送技术总监 -> 运维第一时间响应。
*   **临时排查** -> 输入自定义 Prometheus URL -> 快速生成临时报告，不留痕迹。

---

## ✨ 功能全景升级：从“能用”到“好用”的跨越

为了让大家更直观地感受这次更新的诚意，我们整理了一份功能对比清单：

| 功能模块 | 🚫 旧版本 (V1.0) | ✅ 新版本 (PromAI V2.0) |
| :--- | :--- | :--- |
| **触发方式** | 依赖命令行或简单 API | **UI 界面一键“立即巡检”**，所见即所得 |
| **巡检反馈** | 只有日志，不知道卡在哪 | **可视化进度条**，实时展示巡检步骤与状态 |
| **报告管理** | 生成在服务器本地，查看困难 | **历史报告归档**，Web 端随时查看、下载、回溯 |
| **系统状态** | 无 | **健康看板**，实时展示系统健康度与核心指标 |
| **操作审计** | 无 | **最近活动**，谁在什么时候巡检了哪个环境，一目了然 |

### 1. 🟢 健康看板 (Health Dashboard)
不再只是一个冷冰冰的工具，首页即是大盘。
*   **实时状态**：一眼看清 PromAI 自身服务状态。
*   **快捷入口**：核心功能卡片式布局，操作触手可及。

### 2. 🚀 立即巡检 & 进度可视化
*   **一键启动**：点击“开始巡检”，弹窗选择数据源，点击确认即可。
*   **进度追踪**：不再对着控制台发呆，进度条实时告诉你当前在查哪个指标，任务是否完成。

### 3. 📚 历史报告管理
*   **时光机**：想看上个月的巡检报告？没问题。
*   **在线预览**：无需下载，直接在浏览器中查看历史 HTML 报告。
*   **定期清理**：自动管理磁盘空间，无需担心报告堆积。

### 4. 📝 最近活动 (Recent Activities)
*   **审计日志**：记录每一次巡检任务的发起时间、数据源和执行结果。
*   **团队协作**：团队成员可以看到彼此的操作记录，避免重复巡检。

---

## 🌐 企业级部署架构：中心化 vs 私有化

PromAI 不仅仅是一个小工具，它在架构设计上充分考虑了企业级用户的复杂需求。

### 1. 🌐 中心化部署 (Centralized Deployment)
**“以一当百，运筹帷幄”**
如果你的企业有 100 个 K8s 集群，分布在阿里云、AWS 和自建机房。
*   **传统方式**：在每个集群里装一个 Agent，维护 100 个 Agent，升级一次要半条命。
*   **PromAI 方式**：只在运维管控区部署 **一套** PromAI。
    *   通过网络打通（专线/VPN/Ingress），PromAI 远程连接各个集群的 Prometheus。
    *   **优势**：维护成本极低，升级只需操作一次，所有配置集中管理。

### 2. 🔒 私有化部署 (Private Deployment)
**“数据不出门，安全有保障”**
对于银行、证券、政务等对数据安全极其敏感的客户。
*   **纯内网运行**：PromAI 可以完全断网运行，不依赖任何外部 SaaS 服务。
*   **数据零泄露**：所有的巡检数据、报表生成、存储都在客户自己的服务器上完成。
*   **合规性**：完美契合等保三级等安全合规要求。

---

## ⏰ 定时任务：你的 24 小时贴身管家

PromAI 内置了强大的定时任务调度引擎（Cron），不仅仅是简单的“每天几点运行”。

*   **灵活的 Cron 表达式**：支持秒级调度。
    *   `0 0 9 * * *`：每天早上 9 点发送日报。
*   **多渠道触达**：
    *   任务完成后，支持同时推送到 **企业微信**、**钉钉**、**飞书**、**邮件** 以及 **自定义 Webhook**。

---

## 🌟 核心功能深度解析

### 1. 🎯 智能动态筛选（Smart Filter）
我们在报表顶部增加了动态筛选按钮。
*   **🔥 只看严重 (Critical)**：精准定位“着火点”。
*   **⚠️ 只看警告 (Warning)**：发现潜在隐患。
*   **✅ 只看正常 (Normal)**：确认系统健康度。

### 2. 🌍 多数据源动态切换
*   支持在 UI 上直接选择 **Prometheus-Dev**、**Prometheus-Prod** 或输入 **自定义 URL**。
*   一套 PromAI 部署，即可覆盖公司所有 K8s 集群和物理机环境。

### 3. 📊 覆盖面全，自定义强
*   **默认覆盖**：CPU、内存、磁盘、网络、K8s Pod 状态、Node 状态、常见中间件（MySQL, Redis, Kafka 等）监控。
*   **高度自定义**：支持通过 `config.yaml` 编写自定义 PromQL。你想巡检什么（比如业务订单量、接口延迟），只要 Prometheus 里有，PromAI 就能出报告！

---

## 👨‍💻 加入我们

PromAI 致力于成为最简单、最好用的云原生巡检工具。
代码已完全开源，如果你觉得这次更新很赞，请给我们的 GitHub 仓库点个 **Star** ⭐️！

如果你有更好的想法，欢迎提交 Issue 或 PR，我们一起打造运维人的“瑞士军刀”！

**#PromAI #运维自动化 #Prometheus #云原生 #DevOps #巡检日报 #私有化部署**
